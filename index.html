<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Probar Push con Doppler</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <link rel="icon" href="assets/img/favicon.ico">
  <script type="text/javascript" async src="https://hub.fromdoppler.com/public/dhtrack.js"></script>
  <script src="https://cdn.by.wonderpush.com/sdk/1.1/wonderpush-loader.min.js" async></script>
  <script>
    window.WonderPush = window.WonderPush || [];
    WonderPush.push(["init", {
        webKey: "014ec2b6219cbd4fc0d4d3606b4de48f5b8133d94da3645825f830579934abea",
    }]);
  </script>
  <style>
    /* Estilos del modal */
    #push-modal {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 400px;
      background: white;
      padding: 15px;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      text-align: center;
      display: none;
      z-index: 1000;
    }
    #push-modal button {
      margin: 10px;
      padding: 8px 12px;
      border: none;
      cursor: pointer;
      border-radius: 4px;
    }
    #btn-yes {
      background-color: #007bff;
      color: white;
    }
    #btn-no {
      background-color: #ccc;
    }
  </style>
</head>
<body>
  <div id="push-modal">
    <p>Nos gustaría que estés al tanto de las novedades</p>
    <button id="btn-yes">Sí</button>
    <button id="btn-no">No</button>
  </div>

  <article class="flex-container">
    <section class="flex-item">
      <h1>**Suscribite al PUSH**</h1>
    </section>
  </article>
  <div style="text-align:center;">
    <a href="/tabs/tab1.html">Proba el comportamiento en sitio: ir al Tab1</a>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const modal = document.getElementById("push-modal");
      const btnYes = document.getElementById("btn-yes");
      const btnNo = document.getElementById("btn-no");

      // descomentar si se quiere simular el manejo del push modal aca
      // const wasProcessed = localStorage.getItem("push_modal_was_processed");
      // if (wasProcessed !== "true") {
      //   setTimeout(() => {
      //     modal.style.display = "block";
      //   }, 1000); // Se muestra 1 seg después de cargar la página
      // }

      const originalDomain = window.location.host;
      const guid = localStorage.getItem("_dha__uuid");

      // Acción al hacer clic en "Sí"
      btnYes.addEventListener("click", function() {
        window.open(
          `https://push.leoslopez.site?ori_domain=${originalDomain}&dha_id=${guid}`,
          "pushWindow",
          "width=400,height=300",
        );
        modal.style.display = "none"; // Ocultar modal
      });

      // Acción al hacer clic en "No"
      btnNo.addEventListener("click", function() {
        modal.style.display = "none"; // Ocultar modal
      });
    });
  </script>
  <script>
    var beamer_config = {
      product_id : "exvbVGNd75577" // DO NOT CHANGE: This is your product code on Beamer
    };
  </script>
  <script type="text/javascript" src="https://app.getbeamer.com/js/beamer-embed.js" defer="defer"></script>
</body>
</html>
